var util = require('util');
var path = require('path');
var fs = require('fs');
var tool = require('leaptool');

module.exports = function(app) {

  var engine = { app:app };

  /* record example:
  {
    "amount": 85,
    "description": "zipline for two",
    "category": "activity",
    "paid_by": "u2@example.com",
    "share_by": [ "u2@example.com", "u3@example.com"]
  },
  {
    "amount": 121,
    "description": "car rental",
    "category": "transportation",
    "paid_by": "u1@example.com",
    "share_by": [ "u1@example.com", "u2@example.com", "u3@example.com"]
  }
  */
  engine.process = function(records) {
    var result = {};

    // debug - example output
    result = {
      members: [
        {
          'name': "u1@example.com",
          'paid_amount': 80,
          'share_amount': 90,
          'net_amount': 10
        }, {
          'name': "u2@example.com",
          'paid_amount': 120,
          'share_amount': 90,
          'net_amount': -30
        }, {
          'name': "u3@example.com",
          'paid_amount': 70,
          'share_amount': 90,
          'net_amount': 20
        }
      ]
    };

    return result;
  };



  return engine;
}
